<template>
    <lightning-accordion lwc:ref="regaccordion" active-section-name={section} onsectiontoggle={checktoggle}>
        <lightning-accordion-section name="contacts" label="Choose Contacts to Register">
            <c-contact-selector lwc:ref="contactselector" selected-contacts={contactsSelected} oncontactschosen={handleContactsChosen}></c-contact-selector>
        </lightning-accordion-section>
        <lightning-accordion-section name="sponsor" label="Choose a Sponsor">
            <div>If this is a PE registration, this sponsor will be set as the payment provider.</div>
            <lightning-record-edit-form object-api-name="Registration_Batch__c">
                <lightning-input-field lwc:ref="sponsorlookup" field-name="Sponsor__c"></lightning-input-field>
                <lightning-input-field lwc:ref="sponsorresponsibility" field-name="Default_Transfer__c"></lightning-input-field>
            </lightning-record-edit-form>
            <lightning-button label="Save &amp; Continue" onclick={handleSponsorNext}>Next</lightning-button>
        </lightning-accordion-section>
        <lightning-accordion-section name="review" label="Review Registration">
            <lightning-input label="Number of Contacts Chosen" type="number" value={selectedContactsCount} disabled=true></lightning-input>
            <lightning-input label="Sponsor Chosen" type="text" value={selectedSponsor} class="slds-var-m-bottom_small" disabled=true></lightning-input>
            <lightning-button label="Submit Registration" onclick={submitRegistration}></lightning-button>
        </lightning-accordion-section>
    </lightning-accordion>
</template>